# 서울시 편의점 매출 결정요인 분석

> 데이터 분석 부트캠프 팀 프로젝트

---

# 가상환경 준비, 실행 및 라이브러리 설치
> python -m venv venv
> eenv\Scripts\activate
> pip install -r requirements.txt

---

## 📌 프로젝트 개요

### 연구 질문
**"서울시 편의점 매출을 결정하는 핵심 요인은 무엇인가?"**

### 분석 목적
- 편의점 매출에 영향을 미치는 요인을 데이터 기반으로 검증
- 신규 출점 입지 선정 및 기존 점포 운영 전략 수립에 활용할 인사이트 도출

### 주요 발견
1. **상권유형**이 매출에 가장 큰 영향 (관광특구 > 발달상권 > 전통시장 > 골목상권)
2. **유동인구**와 **점포수**가 매출과 유의한 양의 상관관계
3. 머신러닝 모델(Random Forest)로 매출 예측 시 R²=0.86 달성

---

## 📁 파일 구조

```
📦 프로젝트 폴더
├── 📄 README.md                              # 프로젝트 설명 (현재 파일)
├── 📓 서울시_편의점_매출_통합분석_최종본.ipynb  # 메인 분석 노트북
│
├── 📂 data/
│   ├── 📂 raw/                               # Raw 데이터 (전처리 전)
│   │   ├── sales.csv                         # 매출 데이터
│   │   ├── stores.csv                        # 점포 데이터
│   │   ├── population.csv                    # 유동인구 데이터
│   │   └── districts.csv                     # 상권/행정동 데이터
│   │
│   └── 📂 processed/                         # 전처리 완료 데이터
│       └── 분석데이터.csv
│
└── 📂 outputs/                               # 분석 결과물
    ├── 01_매출분포.png
    ├── 02_이상치분석_박스플롯.png
    ├── 03_분기별_매출추이.png
    ├── 10_표준화_회귀계수.png
    └── ...
```

---

## 📊 데이터 설명

### 데이터 출처
- **서울 열린데이터광장** (data.seoul.go.kr)
- 서울시 우리마을가게 상권분석서비스

### Raw 데이터 (4개 파일)
| 파일명 | 내용 | 주요 변수 |
|--------|------|-----------|
| sales.csv | 매출 데이터 | 당월_매출_금액, 당월_매출_건수 |
| stores.csv | 점포 데이터 | 점포_수, 서비스_업종_코드 |
| population.csv | 유동인구 데이터 | 총_유동인구_수 |
| districts.csv | 상권영역 데이터 | 상권_구분_코드, 행정동_코드 |

### 최종 분석 데이터
| 항목 | 내용 |
|------|------|
| 기간 | 2022년 1분기 ~ 2025년 3분기 (15개 분기) |
| 단위 | 기준년분기 × 행정동 |
| 건수 | 6,097건 |

### 변수 정의
| 변수명 | 설명 | 역할 |
|--------|------|------|
| `당월_매출_금액` | 해당 분기 편의점 총 매출액 (원) | 종속변수 (Y) |
| `총_유동인구_수` | 해당 행정동 총 유동인구 | 독립변수 (X1) |
| `점포_수` | 해당 행정동 편의점 수 | 독립변수 (X2) |
| `주요_상권유형` | 상권 분류 (골목/발달/관광특구/전통시장/미분류) | 독립변수 (X3) |

---

## 🔬 분석 방법론

### 전처리 과정 (3장)
| 단계 | 내용 |
|------|------|
| 데이터 로드 | Raw 데이터 4개 파일 로드 |
| 구조/타입 확인 | 컬럼, 데이터 타입 확인 |
| 결측치 확인 | 각 데이터셋 결측치 현황 |
| 기본 통계 | 수치형 변수 기술통계 |
| 분석 범위 설정 | 편의점만, 2022Q1~2025Q3 필터링 |
| 텍스트 처리 | 인코딩 문제 수정 ('?' → '·') |
| 범주형 처리 | 상권유형 코드 → 명칭 변환 |
| 데이터 병합 | 4개 데이터셋 통합 |
| 결측치 처리 | 상권유형 결측 → '미분류' |
| 이상치 분석 | IQR 방법 (제거 안 함) |
| 중복 확인 | 중복 행 확인 |
| 정합성 체크 | 기간별 데이터 균등 분포 확인 |
| 데이터 저장 | ./data/processed/분석데이터.csv |

### 가설 검증
| 가설 | 내용 | 검증방법 | 결과 |
|------|------|----------|------|
| H1 | 유동인구↑ → 매출↑ | 상관분석, 회귀분석 | ✅ 채택 |
| H2 | 점포수↑ → 매출↑ | 상관분석, 회귀분석 | ✅ 채택 |
| H3 | 상권유형 → 매출 영향 | 회귀분석 (더미변수) | ✅ 채택 |
| H4 | 상권유형 간 매출 차이 | ANOVA + Tukey HSD | ✅ 채택 |

### 사용 기법
- **전처리**: 결측치/이상치 분석, 텍스트 처리, 데이터 병합, 정합성 체크
- **탐색적 분석**: 기술통계, 상관분석, 분기별 추이 시각화
- **통계 검정**: ANOVA, Tukey HSD 사후검정
- **회귀분석**: OLS with Robust SE (HC3), VIF 다중공선성 검정, 표준화 회귀계수
- **머신러닝**: Random Forest, Gradient Boosting

---

## 🚀 실행 방법

### 1. 환경 요구사항
```
Python 3.8+
```

### 2. 필요 라이브러리
```bash
pip install pandas numpy matplotlib seaborn scipy statsmodels scikit-learn
```

### 3. 폴더 구조 준비
```
프로젝트폴더/
├── data/
│   └── raw/
│       ├── sales.csv
│       ├── stores.csv
│       ├── population.csv
│       └── districts.csv
└── 서울시_편의점_매출_통합분석_최종본.ipynb
```

### 4. 실행
1. 모든 파일을 **같은 폴더**에 저장
2. `data/raw/` 폴더에 raw 데이터 4개 파일 배치
3. Jupyter Notebook 실행
4. **Kernel → Restart & Run All** 실행

### 5. 예상 실행 시간
- 약 2~3분 (전처리 + 머신러닝 모델 학습 포함)

---

## 📈 주요 결과

### 회귀분석 결과
- **모델 설명력**: R² = 0.688 (68.8%)
- **유의한 변수**: 유동인구, 점포수, 상권유형 모두 p < 0.001

### 상권유형별 매출 차이 (골목상권 기준)
| 상권유형 | 매출 차이 |
|----------|-----------|
| 관광특구 | +27억원 |
| 발달상권 | +15억원 |
| 전통시장 | +3억원 |
| 미분류 | -12억원 |

### 머신러닝 예측 성능
| 모델 | Test R² |
|------|---------|
| Linear (OLS) | 0.688 |
| **Random Forest** | **0.863** |
| Gradient Boosting | 0.831 |

---

## ⚠️ 분석의 한계

1. **변수 한계**: 임대료, 경쟁강도, 브랜드 등 미포함
2. **분석 단위**: 행정동 집계 데이터 (개별 점포 수준 아님)
3. **인과관계 주의**: 상관관계 ≠ 인과관계 (역인과 가능성)
4. **시계열 특성**: 패널 고정효과 미적용

---

## 👥 팀 정보

- **프로젝트 기간**: 2025년 1월
- **분석 도구**: Python, Jupyter Notebook

---

## 📚 참고자료

- 서울 열린데이터광장: https://data.seoul.go.kr
- statsmodels 공식 문서: https://www.statsmodels.org
- scikit-learn 공식 문서: https://scikit-learn.org

---

*마지막 수정: 2025-01-28*
